{"ast":null,"code":"var _jsxFileName = \"/Users/linhleba/Desktop/ToLiShop/src/components/shipinfo/ShipInfo.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Controls from '../controls/Controls';\nimport { Grid, TextField } from '@material-ui/core';\nimport { useForm, Form } from '../useForm/useForm';\nimport { useDispatch } from 'react-redux';\nimport { setSnackbar } from '../../redux/ducks/snackbar';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport callAPI from '../../utils/apiCaller';\nimport Axios from 'axios';\nimport './shipinfo.css';\nimport * as ImageConfig from '../../constants/ImageConfig'; // const URL_UPLOAD_IMAGE =\n//   'http://api.cloudinary.com/v1_1/dr6oretlc/image/upload';\n// const NAME_UPLOAD_PRESET = 'avatarprofile';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ShipInfo = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [initialFValues, setInitialFValues] = useState({\n    username: '',\n    name: '',\n    email: '',\n    phone: '',\n    address: '',\n    photo: null\n  });\n\n  const validate = (fieldValues = values) => {\n    let temp = { ...errors\n    };\n\n    if ('email' in fieldValues) {\n      temp.email = /$^|.+@.+..+/.test(fieldValues.email) ? '' : 'Định dạng email không hợp lệ.';\n    }\n\n    if ('phone' in fieldValues) {\n      if (!fieldValues.phone) {\n        temp.phone = '';\n      } else {\n        temp.phone = fieldValues.phone.length > 9 ? '' : 'Số điện thoại không hợp lệ.';\n      }\n    }\n\n    setErrors({ ...temp\n    });\n    if (fieldValues == values) return Object.values(temp).every(x => x == '');\n  };\n\n  const {\n    values,\n    setValues,\n    errors,\n    setErrors,\n    handleInputChange,\n    resetForm\n  } = useForm(initialFValues, true, validate);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (validate()) {\n      const payload = {\n        name: values.name,\n        email: values.email,\n        telephone: values.phone,\n        address: values.address,\n        photo: values.photo\n      };\n      let profile = localStorage.getItem('profile');\n      let access_jwt_token = JSON.parse(profile).access_jwt_token;\n      await callAPI('api/account/update', 'put', payload, {\n        authorization: access_jwt_token\n      }).then(res => {\n        if (res.status == 200) {\n          dispatch(setSnackbar(true, 'success', 'Cập nhật thông tin thành công!'));\n        } else {\n          dispatch(setSnackbar(true, 'error', 'Đã có lỗi xảy ra!'));\n        }\n      });\n    }\n  };\n\n  const uploadImage = file => {\n    const formData = new FormData();\n    formData.append('file', file[0]);\n    formData.append('upload_preset', ImageConfig.NAME_UPLOAD_PRESET);\n    Axios.post(ImageConfig.URL_UPLOAD_IMAGE, formData).then(res => {\n      setValues({ ...values,\n        ['photo']: res.data.url\n      });\n    });\n  };\n\n  useEffect(async () => {\n    let profile = localStorage.getItem('profile');\n    let access_jwt_token = JSON.parse(profile).access_jwt_token;\n    await callAPI('api/account/info', 'get', null, {\n      authorization: access_jwt_token\n    }).then(res => {\n      setValues({\n        username: res.data.username,\n        name: res.data.name ? res.data.name : '',\n        email: res.data.email ? res.data.email : '',\n        phone: res.data.telephone ? res.data.telephone : '',\n        address: res.data.address ? res.data.address : '',\n        photo: res.data.photo ? res.data.photo : null\n      });\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Th\\xF4ng tin c\\xE1 nh\\xE2n \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        children: [/*#__PURE__*/_jsxDEV(Controls.Input, {\n          disabled: true,\n          name: \"username\",\n          label: \"T\\xEAn t\\xE0i kho\\u1EA3n\",\n          value: values.username // variant=\"filled\"\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls.Input, {\n          name: \"name\",\n          label: \"H\\u1ECD t\\xEAn\",\n          value: values.name,\n          onChange: handleInputChange,\n          error: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls.Input, {\n          name: \"email\",\n          label: \"Email\",\n          value: values.email,\n          onChange: handleInputChange,\n          error: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls.Input, {\n          name: \"phone\",\n          type: \"tel\",\n          label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n          value: values.phone,\n          onChange: handleInputChange,\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: \"+84\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this)\n          },\n          error: errors.phone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls.Input, {\n          name: \"address\",\n          label: \"\\u0110\\u1ECBa ch\\u1EC9\",\n          value: values.address,\n          onChange: handleInputChange,\n          error: errors.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        item: true,\n        xs: 6,\n        className: \"gridContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"photo-info\",\n          children: [values.photo ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: values.photo,\n            alt: \"Album Art\",\n            className: \"userImageInfo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://cdn-icons-png.flaticon.com/512/149/149071.png\",\n            alt: \"Album Art\",\n            className: \"userImageInfo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"photo\",\n            type: \"file\",\n            label: \"\\u1EA2nh \\u0111\\u1EA1i di\\u1EC7n\" // value={values.photo}\n            ,\n            onChange: e => uploadImage(e.target.files) // error={errors.address}\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controls.Button, {\n      type: \"submit\",\n      text: \"L\\u01B0u thay \\u0111\\u1ED5i\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ShipInfo, \"6YTg+SPS/7/spk1qkY4vYpioo1k=\", false, function () {\n  return [useDispatch, useForm];\n});\n\n_c = ShipInfo;\nexport default ShipInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShipInfo\");","map":{"version":3,"sources":["/Users/linhleba/Desktop/ToLiShop/src/components/shipinfo/ShipInfo.jsx"],"names":["React","useState","useEffect","Controls","Grid","TextField","useForm","Form","useDispatch","setSnackbar","InputAdornment","callAPI","Axios","ImageConfig","ShipInfo","dispatch","initialFValues","setInitialFValues","username","name","email","phone","address","photo","validate","fieldValues","values","temp","errors","test","length","setErrors","Object","every","x","setValues","handleInputChange","resetForm","handleSubmit","e","preventDefault","payload","telephone","profile","localStorage","getItem","access_jwt_token","JSON","parse","authorization","then","res","status","uploadImage","file","formData","FormData","append","NAME_UPLOAD_PRESET","post","URL_UPLOAD_IMAGE","data","url","startAdornment","target","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Controls from '../controls/Controls';\nimport { Grid, TextField } from '@material-ui/core';\nimport { useForm, Form } from '../useForm/useForm';\nimport { useDispatch } from 'react-redux';\nimport { setSnackbar } from '../../redux/ducks/snackbar';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport callAPI from '../../utils/apiCaller';\nimport Axios from 'axios';\nimport './shipinfo.css';\nimport * as ImageConfig from '../../constants/ImageConfig';\n\n// const URL_UPLOAD_IMAGE =\n//   'http://api.cloudinary.com/v1_1/dr6oretlc/image/upload';\n\n// const NAME_UPLOAD_PRESET = 'avatarprofile';\nconst ShipInfo = () => {\n  const dispatch = useDispatch();\n  const [initialFValues, setInitialFValues] = useState({\n    username: '',\n    name: '',\n    email: '',\n    phone: '',\n    address: '',\n    photo: null,\n  });\n  const validate = (fieldValues = values) => {\n    let temp = { ...errors };\n\n    if ('email' in fieldValues) {\n      temp.email = /$^|.+@.+..+/.test(fieldValues.email)\n        ? ''\n        : 'Định dạng email không hợp lệ.';\n    }\n    if ('phone' in fieldValues) {\n      if (!fieldValues.phone) {\n        temp.phone = '';\n      } else {\n        temp.phone =\n          fieldValues.phone.length > 9 ? '' : 'Số điện thoại không hợp lệ.';\n      }\n    }\n\n    setErrors({\n      ...temp,\n    });\n\n    if (fieldValues == values) return Object.values(temp).every((x) => x == '');\n  };\n\n  const { values, setValues, errors, setErrors, handleInputChange, resetForm } =\n    useForm(initialFValues, true, validate);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (validate()) {\n      const payload = {\n        name: values.name,\n        email: values.email,\n        telephone: values.phone,\n        address: values.address,\n        photo: values.photo,\n      };\n      let profile = localStorage.getItem('profile');\n      let access_jwt_token = JSON.parse(profile).access_jwt_token;\n      await callAPI('api/account/update', 'put', payload, {\n        authorization: access_jwt_token,\n      }).then((res) => {\n        if (res.status == 200) {\n          dispatch(\n            setSnackbar(true, 'success', 'Cập nhật thông tin thành công!'),\n          );\n        } else {\n          dispatch(setSnackbar(true, 'error', 'Đã có lỗi xảy ra!'));\n        }\n      });\n    }\n  };\n  const uploadImage = (file) => {\n    const formData = new FormData();\n    formData.append('file', file[0]);\n\n    formData.append('upload_preset', ImageConfig.NAME_UPLOAD_PRESET);\n\n    Axios.post(ImageConfig.URL_UPLOAD_IMAGE, formData).then((res) => {\n      setValues({\n        ...values,\n        ['photo']: res.data.url,\n      });\n    });\n  };\n\n  useEffect(async () => {\n    let profile = localStorage.getItem('profile');\n    let access_jwt_token = JSON.parse(profile).access_jwt_token;\n    await callAPI('api/account/info', 'get', null, {\n      authorization: access_jwt_token,\n    }).then((res) => {\n      setValues({\n        username: res.data.username,\n        name: res.data.name ? res.data.name : '',\n        email: res.data.email ? res.data.email : '',\n        phone: res.data.telephone ? res.data.telephone : '',\n        address: res.data.address ? res.data.address : '',\n        photo: res.data.photo ? res.data.photo : null,\n      });\n    });\n  }, []);\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <h2>Thông tin cá nhân </h2>\n      <Grid container>\n        <Grid item xs={6}>\n          <Controls.Input\n            disabled\n            name=\"username\"\n            label=\"Tên tài khoản\"\n            value={values.username}\n            // variant=\"filled\"\n          />\n          <Controls.Input\n            name=\"name\"\n            label=\"Họ tên\"\n            value={values.name}\n            onChange={handleInputChange}\n            error={errors.name}\n          />\n          <Controls.Input\n            name=\"email\"\n            label=\"Email\"\n            value={values.email}\n            onChange={handleInputChange}\n            error={errors.email}\n          />\n          <Controls.Input\n            name=\"phone\"\n            type=\"tel\"\n            label=\"Số điện thoại\"\n            value={values.phone}\n            onChange={handleInputChange}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">+84</InputAdornment>\n              ),\n            }}\n            error={errors.phone}\n          />\n          <Controls.Input\n            name=\"address\"\n            label=\"Địa chỉ\"\n            value={values.address}\n            onChange={handleInputChange}\n            error={errors.address}\n          />\n        </Grid>\n        <Grid container item xs={6} className=\"gridContainer\">\n          <div className=\"photo-info\">\n            {values.photo ? (\n              <img\n                src={values.photo}\n                alt=\"Album Art\"\n                className=\"userImageInfo\"\n              />\n            ) : (\n              <img\n                src=\"https://cdn-icons-png.flaticon.com/512/149/149071.png\"\n                alt=\"Album Art\"\n                className=\"userImageInfo\"\n              />\n            )}\n            <input\n              name=\"photo\"\n              type=\"file\"\n              label=\"Ảnh đại diện\"\n              // value={values.photo}\n              onChange={(e) => uploadImage(e.target.files)}\n              // error={errors.address}\n            />\n          </div>\n        </Grid>\n      </Grid>\n      <Controls.Button type=\"submit\" text=\"Lưu thay đổi\" />\n      {/* <Controls.Button\n        text=\"Đặt lại\"\n        color=\"default\"\n        onClick={() => resetForm()}\n      /> */}\n    </Form>\n  );\n};\n\nexport default ShipInfo;\n"]},"metadata":{},"sourceType":"module"}